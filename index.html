<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamagotchi Pomo Timer</title>
    <style>
        @font-face {
            font-family: 'DungGeunMo';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff') format('woff');
        }

        body, html { 
            margin: 0; padding: 0; 
            width: 100%; height: 100%; 
            display: flex; justify-content: center; align-items: center; 
            background: transparent; overflow: hidden;
            font-family: 'DungGeunMo', monospace;
        }

        .container {
            position: relative;
            width: 100vw; 
            max-width: 500px;
            aspect-ratio: 1 / 1; 
            background: url('https://i.imgur.com/XnJujO1.png') no-repeat center/contain;
        }

        #screen-area {
            position: absolute;
            top: 46.5%; 
            left: 49.6%;
            transform: translate(-50%, -50%);
            width: 42vw; 
            max-width: 210px;
            height: 32vw;
            max-height: 160px;
            display: flex; 
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 9999; 
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        #date-display { font-size: 2.8vw; color: #5d4037; margin-bottom: 2vw; }
        #display { font-size: 10vw; color: #3e2723; line-height: 1; margin-bottom: 2vw; }
        #mode-label { font-size: 2.5vw; font-weight: bold; }

        @media (min-width: 500px) {
            #date-display { font-size: 0.85rem; }
            #display { font-size: 3.2rem; }
            #mode-label { font-size: 0.75rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="screen-area">
            <div id="date-display">2026.01.29 THU</div>
            <div id="display">25:00</div>
            <div id="mode-label">READY</div>
        </div>
    </div>

    <script>
        let timer = null;
        let isFocusMode = true;
        let timeLeft = 25 * 60;
        let isRunning = false;

        // üçÑ ÏÜåÎ¶¨ ÌååÏùº ÏÑ§Ï†ï (Í≤ΩÎ°ú ÌôïÏù∏ ÏôÑÎ£å)
        const jumpSound = new Audio('https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Super+Mario+Bros+Jump&filename=mt/mtYm02MTEzMzk2MTIxMTM4_v_2f2fK_2bB_2f7Bw.mp3');
        const coinSound = new Audio('https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Super+Mario+Bros+Coin&filename=mt/mtYm02MTEzMzk2MTIxMTM4_1XnS_2bgU37lY.mp3');

        // ÎØ∏Î¶¨ ÏÜåÎ¶¨Î•º Î°úÎìúÌï©ÎãàÎã§.
        jumpSound.load();
        coinSound.load();

        function updateDate() {
            const dateEl = document.getElementById('date-display');
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const date = String(now.getDate()).padStart(2, '0');
            const dayNames = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
            if (dateEl) dateEl.innerText = `${year}.${month}.${date} ${dayNames[now.getDay()]}`;
        }

        function updateDisplay() {
            const displayEl = document.getElementById('display');
            const modeEl = document.getElementById('mode-label');
            const mins = Math.floor(timeLeft / 60);
            const secs = timeLeft % 60;
            if (displayEl) displayEl.innerText = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            if (modeEl) {
                if (!isRunning && timeLeft === 25*60) {
                    modeEl.innerText = "- READY -";
                    modeEl.style.color = "#795548";
                } else {
                    modeEl.innerText = isFocusMode ? "- FOCUS MODE -" : "- REST MODE -";
                    modeEl.style.color = isFocusMode ? "#795548" : "#388e3c"; 
                }
            }
        }

        function toggleTimer() {
            if (isRunning) { 
                clearInterval(timer); 
                timer = null; 
                isRunning = false; 
            } else {
                // üçÑ ÌÅ¥Î¶≠ Ï¶âÏãú ÏÜåÎ¶¨ Ïû¨ÏÉù
                jumpSound.currentTime = 0;
                let playPromise = jumpSound.play();
                
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log("Ïû¨ÏÉù Ïã§Ìå®: ", error);
                    });
                }
                
                isRunning = true;
                timer = setInterval(() => {
                    if (timeLeft > 0) { 
                        timeLeft--; 
                        updateDisplay(); 
                    } else { 
                        coinSound.play(); 
                        clearInterval(timer); 
                        isRunning = false; 
                        setTimeout(() => {
                            if (isFocusMode) {
                                alert("ÏßëÏ§ë ÏôÑÎ£å! ÏΩîÏù∏ ÌöçÎìù! ü™ô");
                                isFocusMode = false;
                                timeLeft = 5 * 60; 
                            } else {
                                alert("Ìú¥Ïãù ÎÅù! Îã§Ïãú Ï∂úÎ∞ú! üçÑ");
                                isFocusMode = true;
                                timeLeft = 25 * 60; 
                            }
                            updateDisplay();
                        }, 100);
                    }
                }, 1000);
            }
            updateDisplay();
        }

        const screenArea = document.getElementById('screen-area');
        
        // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑàÎ•º Îçî ÌôïÏã§ÌïòÍ≤å Ïó∞Í≤∞
        screenArea.addEventListener('click', function() {
            toggleTimer();
        });

        function resetTimer() { 
            clearInterval(timer); 
            timer = null; 
            isRunning = false; 
            isFocusMode = true; 
            timeLeft = 25 * 60; 
            updateDisplay(); 
        }

        // ÎçîÎ∏î ÌÅ¥Î¶≠ Î¶¨Ïä§ÎÑà
        screenArea.addEventListener('dblclick', function(e) {
            e.stopPropagation();
            resetTimer();
        });

        window.onload = function() { 
            updateDate(); 
            updateDisplay(); 
            setInterval(updateDate, 60000); 
        };
    </script>
</body>
</html>
